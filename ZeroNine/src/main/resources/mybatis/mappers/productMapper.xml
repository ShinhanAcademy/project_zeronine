<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.zeronine.product">
  <select id="selectAll" resultType="productVo">
  	select* from product
  </select>
  <select id="selectBypCategoryId" parameterType="Integer" resultType="productVo">
   SELECT *
	FROM public.product where "pCategoryId" = #{pCategoryId}
  </select>
  <select id="selectBypCategoryIdall" parameterType="Integer" resultType="productVo">
   SELECT *
	FROM public.product where "pCategoryId" != #{pCategoryId}
  </select>
  <select id="selectBymanyLiked" resultType="productVo">
  select *
	from "product" pd join (select "productId", count("productId") prcount  
						from "likedProduct" group by "productId") l on  l."productId" = "pd"."productId" 
						order by prcount desc, "pd"."price" asc
  </select>
</mapper>